<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<style>
body { margin:0; background:#0b0f19; font-family:Arial; color:#fff; }
header { background:#121826; padding:20px; display:flex; justify-content:space-between; align-items:center; }
header h2 { margin:0; }
.container { padding:20px; }
.card { background:#121826; padding:20px; border-radius:10px; margin-bottom:20px; }
.card p { margin:10px 0; font-size:16px; }
table { width:100%; border-collapse:collapse; background:#121826; border-radius:10px; overflow:hidden; }
th, td { padding:12px; text-align:left; }
th { background:#1a1f33; }
tr:nth-child(even) { background:#0f1320; }
tr:hover { background:#1f2233; }
.green { color:#3ddc97; }
.red { color:#ff6b6b; }
</style>
</head>
<body>

<header>
  <h2>Dashboard - <span id="username">User</span></h2>
  <button onclick="logout()" style="padding:10px; background:#1f6bff; color:#fff; border:none; border-radius:5px; cursor:pointer;">Logout</button>
</header>

<div class="container">
  <div class="card">
    <h3>Account Overview</h3>
    <p>Balance: <strong id="balance">$0</strong></p>
    <p>Equity: <strong id="equity">$0</strong></p>
  </div>

  <div class="card">
    <h3>Market Prices (Fake Data)</h3>
    <table>
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Price</th>
          <th>Change %</th>
        </tr>
      </thead>
      <tbody id="market-table">
        <!-- JS 填充 -->
      </tbody>
    </table>
  </div>
</div>

<script src="user-data.js"></script>
<script>
// 模拟市场数据
const marketData = [
  { symbol: 'BTC/USD', price: 25000, change: 2.3 },
  { symbol: 'ETH/USD', price: 1700, change: -1.2 },
  { symbol: 'AAPL', price: 155, change: 0.8 },
  { symbol: 'TSLA', price: 720, change: -0.5 },
  { symbol: 'GOOG', price: 2800, change: 1.1 }
];

window.onload = function() {
    const currentUser = localStorage.getItem("currentUser");
    if (!currentUser) {
        alert("No user logged in");
        window.location.href = "index.html";
        return;
    }
    document.getElementById("username").innerText = currentUser;

    const data = getUserData(currentUser);
    document.getElementById("balance").innerText = "$" + data.balance.toLocaleString();
    document.getElementById("equity").innerText = "$" + data.equity.toLocaleString();

    const tableBody = document.getElementById("market-table");
    tableBody.innerHTML = '';
    marketData.forEach(item => {
        const tr = document.createElement('tr');
        const changeClass = item.change >= 0 ? 'green' : 'red';
        tr.innerHTML = `
            <td>${item.symbol}</td>
            <td>$${item.price.toLocaleString()}</td>
            <td class="${changeClass}">${item.change.toFixed(2)}%</td>
        `;
        tableBody.appendChild(tr);
    });
}

// 注销
function logout() {
    localStorage.removeItem("currentUser");
    window.location.href = "index.html";
}
</script>

</body>
</html>
